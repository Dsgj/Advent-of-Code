<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advent of Code 2025 - Visualizations</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap");

        body {
            margin: 0;
            padding: 0;
            background: #0f0f23;
            color: #cccccc;
            font-family: "Source Code Pro", monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header {
            text-align: center;
            margin: 2rem 0;
            padding: 0 1rem;
        }

        h1 {
            color: #00cc00;
            text-shadow: 0 0 2px #00cc00;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        p {
            max-width: 600px;
            color: #cccccc;
        }

        /* Calendar Styles */
        .calendar {
            font-size: 16px;
            line-height: 1.2;
            color: #666666;
            margin-bottom: 3rem;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        a:hover {
            color: #ffffff;
            text-shadow: 0 0 5px #ffffff;
        }

        .calendar-day {
            color: #666666;
        }

        .calendar-complete {
            color: #ffff66;
            text-shadow: 0 0 5px #ffff66;
        }

        .calendar-verycomplete {
            color: #ffff66;
            text-shadow: 0 0 5px #ffff66;
        }

        /* AoC Colors */
        /* AoC Colors */
        .calendar .calendar-color-w {
            color: #fff;
        }

        .calendar .calendar-color-g {
            color: #0f0;
        }

        .calendar .calendar-color-d {
            color: #a74;
        }

        .calendar .calendar-color-n {
            color: #9b715b;
        }

        .calendar .calendar-color-F {
            color: #f90;
            text-shadow: 0 0 5px #f90, 0 0 10px #f90, 0 0 15px #f90;
        }

        .calendar .calendar-color-e {
            color: #0aa;
        }

        .calendar .calendar-color-Y {
            color: #ff6;
            text-shadow: 0 0 5px #ff6, 0 0 10px #ff6, 0 0 15px #ff6;
        }

        .calendar .calendar-color-o {
            color: #f90;
        }

        .calendar .calendar-color-f {
            color: #090;
        }

        .calendar .calendar-color-t {
            color: #32211a;
        }

        .calendar .calendar-color-y {
            color: #ff6;
        }

        .calendar .calendar-color-u {
            color: #06f;
        }

        .calendar .calendar-color-a {
            color: #999;
        }

        .calendar .calendar-color-v {
            color: #b6f;
        }

        .calendar .calendar-color-r {
            color: #f00;
        }

        .calendar .calendar-color-m {
            color: #abc;
        }

        .calendar .calendar-color-c {
            color: #0ff;
        }

        .calendar .calendar-color-b {
            color: #feda1b;
        }

        .calendar .calendar-color-k {
            color: #666;
        }

        /* Reactor animation */
        .calendar .calendar-color-1 {
            animation: 1s linear -0.07s infinite anim-reactor;
        }

        .calendar .calendar-color-2 {
            animation: 1s linear -0.14s infinite anim-reactor;
        }

        .calendar .calendar-color-3 {
            animation: 1s linear -0.21s infinite anim-reactor;
        }

        .calendar .calendar-color-4 {
            animation: 1s linear -0.28s infinite anim-reactor;
        }

        .calendar .calendar-color-5 {
            animation: 1s linear -0.35s infinite anim-reactor;
        }

        @keyframes anim-reactor {
            0% {
                color: #0ff;
            }

            100% {
                color: #08f;
            }
        }

        /* Flicker effect */
        .calendar .calendar-flicker {
            animation: anim-flicker 2s linear infinite;
        }

        @keyframes anim-flicker {
            9.15% {
                filter: brightness(1);
            }

            9.16% {
                filter: brightness(.5);
            }

            10.12% {
                filter: brightness(.5);
            }

            10.13% {
                filter: brightness(1);
            }

            39.13% {
                filter: brightness(.5);
            }

            39.14% {
                filter: brightness(1);
            }

            69.67% {
                filter: brightness(.5);
            }

            69.68% {
                filter: brightness(1);
            }
        }

        /* Conveyor belt */
        .calendar .calendar-conveyor {
            position: relative;
            clip-path: polygon(1ch 0em, -8ch 0em, -8ch 2em, -11ch 2em, -11ch 0em, -13ch 0em, -13ch 2em, -15ch 2em, -15ch 0em, -20ch 0em, -20ch 2em, 1ch 2em);
        }

        .calendar .calendar-conveyor>span {
            position: absolute;
            animation: anim-calendar-conveyor 20s steps(21, jump-none) infinite;
        }

        @keyframes anim-calendar-conveyor {
            0.000% {
                filter: contrast(0);
                transform: translateX(0);
            }

            61.905% {
                filter: none;
                text-shadow: 0 0 4px currentColor, 0 0 4px currentColor;
            }

            66.667% {
                text-shadow: none;
            }

            100.000% {
                filter: none;
                transform: translateX(-20ch);
            }
        }

        .calendar-day-number {
            font-weight: bold;
            color: #cccccc;
        }

        .calendar a.active .calendar-day-number {
            color: #ffff66;
            text-shadow: 0 0 5px #ffff66;
        }

        .calendar-mark-complete,
        .calendar-mark-verycomplete {
            color: #ffff66;
            text-shadow: 0 0 5px #ffff66;
        }

        footer {
            margin-top: auto;
            padding: 2rem;
            text-align: center;
            font-size: 0.8rem;
            color: #666;
        }

        footer a {
            color: #00cc00;
        }

        /* Caravan animation */
        #caravan {
            position: fixed;
            left: -160px;
            top: 10em;
            animation: anim-caravan linear 20s infinite;
            z-index: -1;
        }

        @keyframes anim-caravan {
            0% {
                transform: translateX(0);
                opacity: 1;
            }

            95% {
                transform: translateX(96vw);
                opacity: 1;
            }

            100% {
                transform: translateX(100vw);
                opacity: 0;
            }
        }

        #caravan div {
            position: absolute;
            top: 0;
            color: #aaaaaa;
            animation: anim-reindeer ease 3.5s infinite;
        }

        @keyframes anim-reindeer {
            0% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(5px);
            }

            100% {
                transform: translateY(0);
            }
        }

        #caravan div:before {
            content: "*";
            position: absolute;
            left: 0;
            top: 0;
            font-size: 6pt;
        }

        #caravan div:after {
            content: "*";
            position: absolute;
            left: 10px;
            top: 10px;
            font-size: 5pt;
        }

        #caravan #sleigh:before {
            content: "J";
            transform: scaleX(-1) rotate(90deg);
            font-size: 10pt;
            color: #990000;
            top: 2px;
        }

        #caravan #sleigh:after {
            content: none;
        }

        #caravan #rudolph:before {
            color: #ff0000;
            left: 5px;
            top: 5px;
            text-shadow: 0 0 5px #ff0000, 0 0 5px #ff0000, 0 0 5px #ff0000;
        }

        #caravan #rudolph:after {
            content: none;
        }
    </style>
</head>

<body>
    <header>
        <h1>ðŸŽ„ Advent of Code 2025</h1>
        <p>Interactive visualizations for coding puzzles.</p>
    </header>

    <pre class="calendar">
<a aria-label="Day 1" href="Day01/visualization.html" class="calendar-day1 calendar-verycomplete active">         <span class="calendar-color-w">____</span>           <span class="calendar-color-Y">*</span>                <span class="calendar-color-o">&lt;</span><span class="calendar-color-w">o</span>             
<span class="calendar-color-w">________/</span><span class="calendar-color-a">O___</span><span class="calendar-color-w">\__________</span><span class="calendar-color-r">|</span><span class="calendar-color-w">_________________O______</span>  <span class="calendar-day-number"> 1</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 2" href="Day02/visualization.html" class="calendar-day2 calendar-verycomplete active">   <span class="calendar-color-a">_______</span><span class="calendar-color-m">||</span><span class="calendar-color-a">_________</span>                                   
   <span class="calendar-color-a">|</span> <span class="calendar-color-n">_</span><span class="calendar-color-v">@</span><span class="calendar-color-n">__</span> <span class="calendar-color-m">||</span> <span class="calendar-color-n">_</span><span class="calendar-color-u">o</span><span class="calendar-color-n">_</span>  <span class="calendar-color-r">'.</span><span class="calendar-color-a">|_</span> <span class="calendar-color-a">_________________________</span>   <span class="calendar-day-number"> 2</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 3" href="Day03/visualization.html" class="calendar-day3 calendar-verycomplete active"><span class="calendar-color-w"> </span>  <span class="calendar-color-a">|_</span><span class="calendar-color-r">&amp;</span><span class="calendar-color-a">_</span><span class="calendar-color-y">%</span><span class="calendar-color-a">__</span><span class="calendar-color-m">||</span><span class="calendar-color-a">_</span><span class="calendar-color-u">o</span><span class="calendar-color-o">o</span><span class="calendar-color-a">__</span><span class="calendar-color-m">^</span><span class="calendar-color-n">=</span><span class="calendar-color-a">_</span><span class="calendar-color-n">[</span> <span class="calendar-color-a">\|</span><span class="calendar-color-g">..'</span>  <span class="calendar-color-m">_</span>    <span class="calendar-color-r">.</span><span class="calendar-color-k">.</span> <span class="calendar-color-r">.</span><span class="calendar-color-k">.</span> <span class="calendar-color-r">.</span><span class="calendar-color-k">.</span>     <span class="calendar-color-a">|</span>        
                     <span class="calendar-color-a">\_</span><span class="calendar-color-m">]</span><span class="calendar-color-a">__</span><span class="calendar-color-n">--</span><span class="calendar-color-m">|_|</span><span class="calendar-color-a">___</span><span class="calendar-color-m">[]</span><span class="calendar-color-a">_</span><span class="calendar-color-m">[]</span><span class="calendar-color-a">_</span><span class="calendar-color-m">[]</span><span class="calendar-color-a">__</span><span class="calendar-color-m">//</span><span class="calendar-color-a">_|</span>   <span class="calendar-day-number"> 3</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 4, two stars" href="Day04/visualization.html" class="calendar-day4 calendar-verycomplete active">                               <span class="calendar-color-a">____________</span><span class="calendar-color-m">//</span><span class="calendar-color-a">___</span>        
<span class="calendar-color-w">__________________________</span>  <span class="calendar-color-d">...</span><span class="calendar-color-a">|</span> <span class="calendar-color-w">\</span> <span class="calendar-color-r">'</span><span class="calendar-color-g">'</span><span class="calendar-color-r">'</span><span class="calendar-color-g">'</span><span class="calendar-color-r">'</span><span class="calendar-color-g">'</span> <span class="calendar-color-m">//</span> <span class="calendar-color-w">@@</span><span class="calendar-color-a">|</span>   <span class="calendar-day-number"> 4</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 5, two stars" href="Day05/visualization.html" class="calendar-day5 calendar-verycomplete active"><span class="calendar-color-a">|</span><span class="calendar-color-f">_</span>  <span class="calendar-color-w">___</span> <span class="calendar-color-a">|</span> <span class="calendar-color-m">.--.</span>  <span class="calendar-color-f">()</span>   <span class="calendar-color-f">()</span>  <span class="calendar-color-a">|</span><span class="calendar-color-d">.'</span> <span class="calendar-color-d">..</span><span class="calendar-color-a">__</span><span class="calendar-color-m">[#]</span><span class="calendar-color-a">_</span><span class="calendar-color-w">@@</span><span class="calendar-color-a">__</span><span class="calendar-color-m">//</span><span class="calendar-color-a">_</span><span class="calendar-color-w">@@@</span><span class="calendar-color-a">|</span>        
<span class="calendar-color-a">|</span><span class="calendar-color-f">_\</span><span class="calendar-color-a">_</span><span class="calendar-color-w">|</span><span class="calendar-color-F">^</span><span class="calendar-color-w">|</span><span class="calendar-color-a">_</span><span class="calendar-color-m">]</span><span class="calendar-color-a">_</span><span class="calendar-color-m">|</span><span class="calendar-color-n">==</span><span class="calendar-color-m">|</span><span class="calendar-color-a">_</span><span class="calendar-color-n">T</span><span class="calendar-color-a">_</span><span class="calendar-color-n">T</span><span class="calendar-color-a">_</span><span class="calendar-color-n">T</span><span class="calendar-color-a">_</span><span class="calendar-color-n">T</span><span class="calendar-color-a">_</span><span class="calendar-color-n">T</span><span class="calendar-color-a">_</span><span class="calendar-color-d">...'</span>                      <span class="calendar-day-number"> 5</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 6, two stars" href="Day06/visualization.html" class="calendar-day6 calendar-verycomplete active"> <span class="calendar-color-f">||</span>   <span class="calendar-color-a">____________</span>    <span class="calendar-color-a">_______________________</span>          
<span class="calendar-color-a">_</span><span class="calendar-color-f">||</span><span class="calendar-color-a">__/</span><span class="calendar-color-r">'...'</span> <span class="calendar-color-g">'...'</span> <span class="calendar-color-a">\_</span>  <span class="calendar-color-a">|</span><span class="calendar-color-r">.</span>     <span class="calendar-color-n">|</span><span class="calendar-color-r">~</span>    <span class="calendar-color-g">.'</span><span class="calendar-color-r">'.</span>    <span class="calendar-color-r">.</span><span class="calendar-color-a">|</span>      <span class="calendar-day-number"> 6</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 7, two stars" href="Day07/visualization.html" class="calendar-day7 calendar-verycomplete active"><span class="calendar-color-a">|</span><span class="calendar-color-g">^</span><span class="calendar-color-v">@</span> <span class="calendar-color-a">|</span>   <span class="calendar-color-m">1</span>  <span class="calendar-color-m">2</span>  <span class="calendar-color-m">3</span> <span class="calendar-color-f">()</span> <span class="calendar-color-a">|</span>  <span class="calendar-color-a">|</span> <span class="calendar-color-r">'..'</span><span class="calendar-color-n">/</span> <span class="calendar-color-n">\</span><span class="calendar-color-g">'..'</span>    <span class="calendar-color-r">'..'</span> <span class="calendar-color-a">|____</span>       
<span class="calendar-color-a">|</span><span class="calendar-color-r">&amp;</span><span class="calendar-color-y">%</span><span class="calendar-color-e">;</span><span class="calendar-color-m">]</span><span class="calendar-color-a">__</span><span class="calendar-color-m">[]</span><span class="calendar-color-a">_</span><span class="calendar-color-m">[]</span><span class="calendar-color-a">_</span><span class="calendar-color-m">[]</span><span class="calendar-color-a">__</span><span class="calendar-color-y">&lt;&gt;</span><span class="calendar-color-a">|</span>  <span class="calendar-color-a">|</span>    <span class="calendar-color-n">|H_</span><span class="calendar-color-u">/</span><span class="calendar-color-n">|</span><span class="calendar-color-u">\</span>   <span class="calendar-color-m">\\\\\\</span>  <span class="calendar-color-a">|</span> <span class="calendar-color-m">|</span> <span class="calendar-color-a">|</span>  <span class="calendar-day-number"> 7</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 8, two stars" href="Day08/visualization.html" class="calendar-day8 calendar-verycomplete active">                  <span class="calendar-color-y">'...</span><span class="calendar-color-a">|</span><span class="calendar-color-y">&lt;&gt;</span><span class="calendar-color-f">__</span><span class="calendar-color-n">|H</span><span class="calendar-color-f">__</span><span class="calendar-color-n">|</span><span class="calendar-color-f">_</span><span class="calendar-color-u">\</span><span class="calendar-color-f">__</span><span class="calendar-color-m">|</span><span class="calendar-color-f">_____</span><span class="calendar-color-m">|</span><span class="calendar-color-f">_</span><span class="calendar-color-n">[</span><span class="calendar-color-a">_</span><span class="calendar-color-m">O</span><span class="calendar-color-a">_|</span>       
 <span class="calendar-color-a">__________________________</span>                   <span class="calendar-color-m">|</span>    <span class="calendar-day-number"> 8</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 9, two stars" href="Day09/visualization.html" class="calendar-day9 calendar-verycomplete active"><span class="calendar-color-a">/</span><span class="calendar-color-r">'....'</span><span class="calendar-color-m">______</span><span class="calendar-color-g">'...'...'</span><span class="calendar-color-m">__</span><span class="calendar-color-r">'.</span><span class="calendar-color-a">|</span>  <span class="calendar-color-a">_________________</span><span class="calendar-color-m">O</span><span class="calendar-color-a">__</span>       
<span class="calendar-color-n">[</span>     <span class="calendar-color-m">|</span><span class="calendar-color-u">(</span><span class="calendar-color-b">__</span><span class="calendar-color-u">)</span> <span class="calendar-color-n">[</span>        <span class="calendar-conveyor"><span style="color:#0aa;animation-delay:-11.429s;">;</span><span style="color:#ff6;animation-delay:-5.714s;">%</span><span style="color:#0ff;animation-delay:-2.857s;">o</span><span style="color:#b6f;animation-delay:-17.143s;">@</span><span style="color:#f00;animation-delay:-14.286s;">&amp;</span><span style="color:#f90;animation-delay:-0.000s;">o</span><span style="color:#0f0;animation-delay:-8.571s;">^</span></span> <span class="calendar-color-n">]</span> <span class="calendar-color-m">\</span> <span class="calendar-color-a">|__|</span>  <span class="calendar-color-u">[</span>  <span class="calendar-color-u">]</span>  <span class="calendar-color-g">'</span><span class="calendar-color-r">'</span><span class="calendar-color-g">'</span><span class="calendar-color-r">'</span><span class="calendar-color-g">'</span><span class="calendar-color-r">'</span>  <span class="calendar-color-m">|</span> <span class="calendar-color-a">|</span>  <span class="calendar-day-number"> 9</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 10, two stars" href="Day10/visualization.html" class="calendar-day10 calendar-verycomplete active"><span class="calendar-color-b">o=====</span><span class="calendar-color-m">|_____</span><span class="calendar-color-b">o=========o</span><span class="calendar-color-m">_|</span><span class="calendar-color-a">_</span><span class="calendar-color-m">[</span><span class="calendar-color-a">__</span><span class="calendar-color-n">]</span><span class="calendar-color-a">_____</span><span class="calendar-color-n">-/</span><span class="calendar-color-a">_</span><span class="calendar-color-n">-/</span><span class="calendar-color-a">_</span><span class="calendar-color-n">-/</span><span class="calendar-color-a">___</span><span class="calendar-color-m">|</span><span class="calendar-color-a">_|</span>       
<span class="calendar-color-a">_________</span><span class="calendar-color-m">||</span><span class="calendar-color-a">______</span> <span class="calendar-color-a">______________________________</span>   <span class="calendar-day-number">10</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 11, two stars" href="Day11/visualization.html" class="calendar-day11 calendar-verycomplete active"><span class="calendar-color-a">|</span>  <span class="calendar-color-m">___</span>       <span class="calendar-color-g">'..</span><span class="calendar-color-a">|</span> <span class="calendar-color-a">|</span><span class="calendar-color-r">'..'</span><span class="calendar-color-g">'..'</span><span class="calendar-color-r">'..'</span><span class="calendar-color-g">'..'</span><span class="calendar-color-r">'..'</span><span class="calendar-color-g">'..'</span><span class="calendar-color-r">'..'</span><span class="calendar-color-a">|</span>        
<span class="calendar-color-a">|_</span><span class="calendar-color-m">|</span><span class="calendar-color-g"><span class="calendar-flicker" style="animation-delay:-0.80s;">'</span><span class="calendar-flicker" style="animation-delay:-0.35s;">'</span></span><span class="calendar-color-r"><span class="calendar-flicker" style="animation-delay:-0.05s;">'</span></span><span class="calendar-color-m">|</span><span class="calendar-color-a">_</span><span class="calendar-color-m">(</span><span class="calendar-color-1">:</span><span class="calendar-color-2">:</span><span class="calendar-color-3">:</span><span class="calendar-color-4">:</span><span class="calendar-color-5">:</span><span class="calendar-color-m">)</span><span class="calendar-color-a">_|</span> <span class="calendar-color-a">|</span>   <span class="calendar-color-Y">*</span>  <span class="calendar-color-f">()</span>  <span class="calendar-color-Y">*</span>  <span class="calendar-color-f">()</span>  <span class="calendar-color-Y">*</span>  <span class="calendar-color-f">()</span>  <span class="calendar-color-Y">*</span>   <span class="calendar-color-a">|</span>   <span class="calendar-day-number">11</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>
<a aria-label="Day 12, two stars" href="Day12/visualization.html" class="calendar-day12 calendar-verycomplete active">    <span class="calendar-color-m">|</span>      <span class="calendar-color-m">.--.</span>   <span class="calendar-color-a">|</span>  <span class="calendar-color-f">&lt;</span><span class="calendar-color-r">o</span><span class="calendar-color-f">&gt;</span>    <span class="calendar-color-f">&lt;^</span><span class="calendar-color-g">o</span>    <span class="calendar-color-f">&lt;</span><span class="calendar-color-c">o</span><span class="calendar-color-f">&gt;</span>    <span class="calendar-color-v">o</span><span class="calendar-color-f">^&gt;</span>  <span class="calendar-color-a">|</span>        
    <span class="calendar-color-m">'------'</span>  <span class="calendar-color-m">'---#</span><span class="calendar-color-a">_</span><span class="calendar-color-f">&lt;&lt;^</span><span class="calendar-color-o">o</span><span class="calendar-color-f">&gt;</span><span class="calendar-color-a">__</span><span class="calendar-color-f">&lt;</span><span class="calendar-color-y">o</span><span class="calendar-color-f">^&gt;&gt;</span><span class="calendar-color-a">__</span><span class="calendar-color-f">&lt;&lt;^&gt;</span><span class="calendar-color-u">o</span><span class="calendar-color-a">__</span><span class="calendar-color-f">&lt;&lt;^</span><span class="calendar-color-r">o</span><span class="calendar-color-f">&gt;</span><span class="calendar-color-a">_|</span>   <span class="calendar-day-number">12</span> <span class="calendar-mark-complete">*</span><span class="calendar-mark-verycomplete">*</span></a>

    </pre>

    <div id="caravan">
        <div style="animation-delay:-0.0s; left:0px;" id="sleigh"></div>
        <div style="animation-delay:-0.5s; left:20px;"></div>
        <div style="animation-delay:-1.0s; left:40px;"></div>
        <div style="animation-delay:-1.5s; left:60px;"></div>
        <div style="animation-delay:-2.0s; left:80px;"></div>
        <div style="animation-delay:-2.5s; left:100px;"></div>
        <div style="animation-delay:-3.0s; left:120px;"></div>
        <div style="animation-delay:-3.5s; left:140px;" id="rudolph"></div>
    </div>

    <footer>
        <p>
            Generated with <strong>Antigravity</strong> (Gemini 3 Pro & Claude Opus
            4.5).<br />
            Solutions by Leo Ozolins-Carlson. Puzzles by Eric Wastl.
        </p>
    </footer>
    <script>
        (function () {
            const mutableData = {
                1: [0, 1, 2, 3, 4, 5, 6, 7, 8, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 43, 44, 45, 46, 47, 48],
                2: [0, 1, 2, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 57, 58, 59, 105],
                3: [0, 1, 2, 48, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 105],
                4: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 48, 105],
                5: [48, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105],
                6: [0, 3, 4, 5, 18, 19, 20, 21, 45, 46, 47, 48, 101, 102, 103, 104, 105],
                7: [18, 20, 21],
                8: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 57, 84, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 104, 105],
                9: [27, 28],
                10: [74, 105],
                11: [17, 48, 74, 105],
                12: [0, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 17, 48, 56, 57, 58, 59, 60, 69, 70, 105],

            };
            const dayColors = {
                1: "calendar-color-w",
                2: "calendar-color-t",
                3: "calendar-color-t",
                4: "calendar-color-t",
                5: "calendar-color-t",
                6: "calendar-color-t",
                7: "calendar-color-t",
                8: "calendar-color-t",
                9: "calendar-color-t",
                10: "calendar-color-t",
                11: "calendar-color-t",
                12: "calendar-color-t"
            };

            // Helpers for DOM manipulation
            function findNodeAtGlobalIndex(root, targetIdx) {
                let currentIdx = 0;
                let result = null;
                function traverse(node) {
                    if (result) return;
                    if (node.nodeType === 3) {
                        const len = node.nodeValue.length;
                        if (currentIdx + len > targetIdx) {
                            result = { node: node, localIdx: targetIdx - currentIdx };
                            return;
                        }
                        currentIdx += len;
                    } else {
                        for (let i = 0; i < node.childNodes.length; i++) {
                            traverse(node.childNodes[i]);
                            if (result) return;
                        }
                    }
                }
                traverse(root);
                return result;
            }

            function ensureColorClass(root, idx, className) {
                const target = findNodeAtGlobalIndex(root, idx);
                if (!target) return;
                const node = target.node;
                if (node.parentNode.classList.contains(className)) return;
                const middle = node.splitText(target.localIdx);
                middle.splitText(1);
                const span = document.createElement("span");
                span.className = className;
                node.parentNode.insertBefore(span, middle);
                span.appendChild(middle);
            }

            function setChar(root, idx, char) {
                const target = findNodeAtGlobalIndex(root, idx);
                if (target) {
                    const node = target.node;
                    const text = node.nodeValue;
                    const localIdx = target.localIdx;

                    // Safety check: Never replace a newline or carriage return
                    if (text[localIdx] === "\n" || text[localIdx] === "\r") return;

                    // Use substring replacement to preserve other characters (like newlines)
                    // if the node wasn't perfectly isolated
                    if (text.length > 1) {
                        node.nodeValue =
                            text.substring(0, localIdx) +
                            char +
                            text.substring(localIdx + 1);
                    } else {
                        node.nodeValue = char;
                    }
                }
            }

            // 1. Setup Colors & Elements
            const dayElements = {};
            const MAX_DAY = 12;

            // Gather all available day elements
            for (let d = 1; d <= MAX_DAY; d++) {
                const el = document.querySelector(`.calendar-day${d}`);
                // Check if we have mutable data AND the day is "solved" (is a link or marked complete)
                const isSolved = el && (el.tagName === 'A' || el.classList.contains('calendar-complete') || el.classList.contains('calendar-verycomplete'));

                if (isSolved && mutableData[d] && mutableData[d].length > 0) {
                    dayElements[d] = el;

                    // Apply colors if defined
                    if (dayColors[d]) {
                        [...mutableData[d]]
                            .sort((a, b) => b - a)
                            .forEach((idx) => ensureColorClass(el, idx, dayColors[d]));
                    }
                }
            }

            const activeDays = Object.keys(dayElements).map(Number).sort((a, b) => a - b);

            if (activeDays.length > 0) {
                // Clear initial symbols in mapped slots
                // This ensures the "sky" is empty before snow starts
                activeDays.forEach(d => {
                    if (dayElements[d]) {
                        mutableData[d].forEach(idx => {
                            setChar(dayElements[d], idx, " ");
                        });
                    }
                });

                // 2. Build Spawner System
                const allCols = new Set();
                activeDays.forEach(d => {
                    mutableData[d].forEach(col => allCols.add(col));
                });

                // State - now tracking row (0 or 1) within each day
                // Each day has 2 rows, but different days may have different row lengths
                // Pre-compute row offset for each day
                const dayRowOffsets = {};
                activeDays.forEach(d => {
                    const text = dayElements[d].textContent;
                    const newlinePos = text.indexOf('\n');
                    dayRowOffsets[d] = newlinePos >= 0 ? newlinePos + 1 : 57; // fallback to 57
                });

                let particles = []; // { col, dayIdx, row (0 or 1), state (0=', 1=.) }
                const colLastSpawnTime = {}; // col -> timestamp
                const MIN_SPAWN_DELAY = 1000; // ms

                // Helper to get actual index from visual column, row, and day
                function getIndex(col, row, dayNum) {
                    const offset = dayRowOffsets[dayNum] || 57;
                    return col + (row * offset);
                }

                // Initialize spawn times with some random offsets so they don't all start at once
                allCols.forEach(col => {
                    // Start available immediately or with slight offset
                    colLastSpawnTime[col] = Date.now() - Math.random() * 5000;
                });

                // 3. Animation Loop
                setInterval(() => {
                    const now = Date.now();

                    // A. Update Existing Particles
                    for (let i = particles.length - 1; i >= 0; i--) {
                        const p = particles[i];
                        const currentDayNum = activeDays[p.dayIdx];
                        const currentEl = dayElements[currentDayNum];
                        const currentIdx = getIndex(p.col, p.row, currentDayNum);

                        // Handle delay (falling through invisible positions)
                        if (p.delay > 0) {
                            p.delay--;
                            if (p.delay === 0) {
                                const idx = getIndex(p.col, p.row, currentDayNum);
                                if (currentEl && mutableData[currentDayNum]?.includes(idx)) {
                                    setChar(currentEl, idx, "'");
                                }
                            }
                            continue;
                        }

                        if (p.state === 0) {
                            // Currently showing ' -> change to .
                            p.state = 1;
                            if (currentEl && mutableData[currentDayNum]?.includes(currentIdx)) {
                                setChar(currentEl, currentIdx, ".");
                            }
                        } else {
                            // Currently showing . -> move to next position
                            if (currentEl && mutableData[currentDayNum]?.includes(currentIdx)) {
                                setChar(currentEl, currentIdx, " ");
                            }

                            // Move to next position: row 0 -> row 1, or row 1 -> next day row 0
                            if (p.row === 0) {
                                p.row = 1;
                            } else {
                                p.row = 0;
                                p.dayIdx++;
                            }
                            p.state = 0;

                            // Check if we're past all days
                            if (p.dayIdx >= activeDays.length) {
                                particles.splice(i, 1);
                                continue;
                            }

                            // Find next visible position (skip invisible ones with delay)
                            let skipped = 0;
                            while (p.dayIdx < activeDays.length) {
                                const nextDayNum = activeDays[p.dayIdx];
                                const nextIdx = getIndex(p.col, p.row, nextDayNum);
                                if (mutableData[nextDayNum]?.includes(nextIdx)) {
                                    // Found visible position
                                    p.delay = skipped * 2;
                                    if (p.delay === 0) {
                                        setChar(dayElements[nextDayNum], nextIdx, "'");
                                    }
                                    break;
                                }
                                // Skip this position
                                skipped++;
                                if (p.row === 0) {
                                    p.row = 1;
                                } else {
                                    p.row = 0;
                                    p.dayIdx++;
                                }
                            }

                            if (p.dayIdx >= activeDays.length) {
                                particles.splice(i, 1);
                            }
                        }
                    }

                    // B. Spawn New Particles - ONLY on Day 1, Row 0 (indices 0-48)
                    allCols.forEach(col => {
                        const last = colLastSpawnTime[col] || 0;
                        const delta = now - last;

                        if (delta > MIN_SPAWN_DELAY) {
                            if (Math.random() < 0.1) {
                                const topDay = activeDays[0];
                                const spawnIdx = getIndex(col, 0, topDay); // Row 0 index
                                if (mutableData[topDay]?.includes(spawnIdx)) {
                                    particles.push({
                                        col: col,
                                        dayIdx: 0,
                                        row: 0,
                                        state: 0,
                                        delay: 0
                                    });
                                    setChar(dayElements[topDay], spawnIdx, "'");
                                    colLastSpawnTime[col] = now + Math.random() * 3000;
                                } else {
                                    colLastSpawnTime[col] = now + Math.random() * 5000;
                                }
                            }
                        }
                    });

                }, 150);
            }
        })();
    </script>
</body>

</html>